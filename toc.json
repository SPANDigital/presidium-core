---
layout: null
---
{% assign section_counter = 0 %}
[
{% for section in site.data.sections %}
  {% assign groups = site[section.collection] | group_by: "category" %}
  {% assign ungrouped_articles = site[section.collection] %}
  {% if groups.size == 1 and groups[0].name.size == 0 %}
    {% assign article_order = 0 %}
    {
    "title": "{{ section.name }}",
    "dropdown": true,
    "path": "{{ section.path }}",
    "order": {{ section_counter }},
    "type": "section",
    "articles": [
    {% for article in ungrouped_articles %}
      {
        "title": "{{ article.title }}",
        "url": "{{ baseurl }}{{ section.path }}#{{ article.title | slugify }}",
        "order": {{ article_order }},
        "type": "article"
      }{% if forloop.last %}{% else %},{% endif %}
      {% assign article_order = article_order | plus: 1 %}
    {% endfor %}
    ]
    }{% if forloop.last %}{% else %},{% endif %}
  {% assign section_counter = section_counter | plus: 1 %}
  {% else %}
    {% assign section_name = section.name | slugify %}
    {% assign page_name = page.title | slugify %}
    {% assign group_order = 0 %}
    {
    "title": "{{ section.name }}",
    "dropdown": false,
    "url": "{{ baseurl }}{{ section.path }}#{{ section.name | slugify }}",
    "order": {{ section_counter }},
    "type": "section",
    "groups": [
    {% for group in groups %}
      {% assign articles = site[section.collection] | where: "category", group.name %}
      {% if group.name.size > 0 %}
        {% assign article_order = 0 %}
        {
        "title": "{{ group.name }}",
        "dropdown": true,
        "order": {{ group_order }},
        "articles": [
        {% for article in articles %}
          {
          "title": "{{ article.title }}",
          "url": "{{ baseurl }}{{ section.path }}#{{ article.title | slugify}}",
          "order": {{ article_order }}
          }{% if forloop.last %}{% else %},{% endif %}
        {% assign article_order = article_order | plus: 1 %}
        {% endfor %}
        ]
        }{% if forloop.last %}{% else %},{% endif %}
      {% endif %}
      {% assign group_order = group_order | plus: 1 %}
    {% endfor %}
    ]
    }{% if forloop.last %}{% else %},{% endif %}
    {% assign section_counter = section_counter | plus: 1 %}
{% endif %}
{% endfor %}
]
